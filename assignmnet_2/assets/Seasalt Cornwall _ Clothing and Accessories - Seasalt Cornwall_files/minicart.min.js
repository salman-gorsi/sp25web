define(['jquery','uiComponent','mage/url','Magento_Customer/js/customer-data'],function($,Component,urlBuilder,customerData){'use strict';return Component.extend({initialize:function(){const cartData=customerData.get('cart');if(cartData()?.items?.length>0){this.fetchInsiderMiniCartData();}
cartData.subscribe(function(){this.fetchInsiderMiniCartData();}.bind(this));},fetchInsiderMiniCartData:function(){const self=this;const controllerUrl=urlBuilder.build("insider_minicart/insider/minicart");$.post(controllerUrl).done(function(response){if(response.error){console.error("insider_basket error",response.error);}else{const lineItems=(JSON.parse(response)).line_items;if(response.length>0&&lineItems?.length>0){self.updateInsiderBasketObject(response);}}}).fail(function(e){console.error("insider_basket error",e.responseText);});},updateInsiderBasketObject:function(object){window.insider_object=window.insider_object||{};window.insider_object.basket=JSON.parse(object)},});});