define(['jquery','uiComponent'],function($,Component){('use strict');const FULL_INSIDER_FLOW=3;const COOKIE_FREE_INSIDER_FLOW=1;return Component.extend({initialize:function({enabled,fullTagCookieGroup,fullTagSrc,cookieFreeTagSrc,}){if(!enabled||!fullTagSrc||!cookieFreeTagSrc){return;}
this._super();let insiderTagLoaded=false;$(window).on('seasalt:insider:load',function(){if(insiderTagLoaded===false){try{const isFullInsiderUser=hasAcceptedCookieGroup(fullTagCookieGroup);setInsiderFlow(isFullInsiderUser);const tagSrc=isFullInsiderUser?fullTagSrc:cookieFreeTagSrc;const insiderScriptTag=createInsiderScriptTag(tagSrc);document.body.appendChild(insiderScriptTag);insiderTagLoaded=true;}catch(error){console.error(error);}}});function setInsiderFlow(isFullInsiderUser){window.insiderFlow=isFullInsiderUser?FULL_INSIDER_FLOW:COOKIE_FREE_INSIDER_FLOW;}
function hasAcceptedCookieGroup(cookieGroup){return(window?.OnetrustActiveGroups?.includes(cookieGroup)??false);}
function createInsiderScriptTag(src){const insiderMainScript=document.createElement('script');insiderMainScript.setAttribute('type','text/javascript');insiderMainScript.setAttribute('async','');insiderMainScript.setAttribute('src',src);return insiderMainScript;}},});});