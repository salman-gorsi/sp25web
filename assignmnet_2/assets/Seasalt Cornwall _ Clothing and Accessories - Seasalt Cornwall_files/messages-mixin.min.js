define(["jquery",'escaper'],function($,escaper){"use strict";return function(originalComponent){return originalComponent.extend({defaults:{allowedTags:['div','span','b','strong','i','em','u','a']},onHiddenChange:function(isHidden){if(isHidden&&!this.hasErrorMessages()){setTimeout(function(){$(this.selector).hide("blind",{},this.hideSpeed);this.removeAll()}.bind(this),this.hideTimeout);}},hasErrorMessages:function(){const errorMessages=this.messageContainer.getErrorMessages()._latestValue;return errorMessages.length>0;},isVisible:function(){const isCheckout=Boolean(document.querySelector(".checkout-index-index"));if(isCheckout){const repeatedMessage=document.querySelector(".checkout-index-index .messages > .message-error.error.message div");if(repeatedMessage&&this.messageContainer.getErrorMessages()._latestValue[0]===repeatedMessage.innerText){return false;}}
return this.isHidden(this.messageContainer.hasMessages());},prepareMessageForHtml:function(message){return escaper.escapeHtml(message,this.allowedTags);}});};});