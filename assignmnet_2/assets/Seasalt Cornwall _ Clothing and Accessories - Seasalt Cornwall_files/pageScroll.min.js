define(["underscore","Magento_Theme/js/gsap.min","matchMedia"],function(_,gsap,mediaCheck){"use strict";const pageHeader=document.querySelector("header.page-header");const searchBar=document.querySelector(".block.block-search");const scrollThrottle=_.throttle(handleScrollEvent,50);const scrollBufferThreshold=15;let scrollBuffer=0;let searchBarVisible=false;let previousScrollPosition=0;function init(){handleHeaderSearchIcon();}
init();function handleHeaderSearchIcon(){const headerSearchIcon=document.querySelector(".mobile-search-icon");mediaCheck({media:"(max-width: 1024px)",entry:function addSearchIcon(){headerSearchIcon.addEventListener("click",handleSearchBarVisibility);}});}
function handleSearchBarVisibility(){const activeStickyBar=document.querySelector(".product-sticky.active");if(searchBarVisible){hideSearchBar();if(activeStickyBar){activeStickyBar.style.top="57px";}}else{showSearchBar();if(activeStickyBar){activeStickyBar.style.top="122px";}}}
window.addEventListener("scroll",scrollThrottle);document.querySelector(".header.content .block-search input")&&document.querySelector(".header.content .block-search input").removeAttribute("disabled");function showSearchBar(){gsap.gsap.to(searchBar,{height:65,duration:0.2,ease:"none",});searchBarVisible=true;searchBar.classList.remove("block-search--collapsed");}
function hideSearchBar(){gsap.gsap.to(searchBar,{height:0,duration:0.2,ease:"none",});searchBarVisible=false;searchBar.classList.add("block-search--collapsed");}
function handleScrollEvent(){if(window.matchMedia("(max-width: 1024px)").matches){scrollBuffer++;if(window.scrollY<previousScrollPosition&&scrollBuffer>=scrollBufferThreshold&&window.scrollY>pageHeader.offsetHeight){showSearchBar();scrollBuffer=0;}else if((window.scrollY>=previousScrollPosition&&scrollBuffer>=scrollBufferThreshold)||window.scrollY<pageHeader.offsetHeight){hideSearchBar();scrollBuffer=0;}
previousScrollPosition=window.scrollY;}}});