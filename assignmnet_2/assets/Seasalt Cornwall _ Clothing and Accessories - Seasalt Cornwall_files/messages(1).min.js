define(['jquery','uiComponent','Magento_Customer/js/customer-data','underscore','escaper','jquery/jquery-storageapi'],function($,Component,customerData,_,escaper){'use strict';return Component.extend({defaults:{cookieMessages:[],messages:[],allowedTags:['div','span','b','strong','i','em','u','a']},initialize:function(){this._super();this.cookieMessages=_.unique($.cookieStorage.get('mage-messages'),'text');this.messages=customerData.get('messages').extend({disposableCustomerData:'messages'});if(!_.isEmpty(this.messages().messages)){customerData.set('messages',{});}
this.setCookieMessage();$.cookieStorage.set('mage-messages','');},setCookieMessage:function(){var path='/';if($.cookieStorage.get('store')==='en_ie'){path='/ie';}
var d=new Date();d.setTime(d.getTime()+(24*60*60*1000));var expires="expires="+d.toGMTString();document.cookie='mage-messages'+"="+''+";"+expires+";path="+path;},prepareMessageForHtml:function(message){return escaper.escapeHtml(message,this.allowedTags);}});});