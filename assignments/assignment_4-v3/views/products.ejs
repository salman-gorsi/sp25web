<section class="products-hero">
    <div class="products-hero-content">
        <h1>Our Collections</h1>
        <p>Discover our beautiful range of clothing inspired by Cornwall's creative heritage</p>
    </div>
</section>

<section class="products-filter">
    <div class="filter-container">
        <h2>Shop by Category</h2>
        <div class="category-filters">
            <a href="/products" class="filter-link <%= !selectedCategory ? 'active' : '' %>">All Products</a>
            <% categories.forEach(category => { %>
                <a href="/products?category=<%= category.slug %>" 
                   class="filter-link <%= selectedCategory === category.slug ? 'active' : '' %>">
                    <%= category.name %>
                </a>
            <% }) %>
        </div>
    </div>
</section>

<section class="products-grid">
    <div class="products-container">
        <% if (products.length > 0) { %>
            <div class="products-list">
                <% products.forEach(product => { %>
                    <div class="product-card">
                        <div class="product-image">
                            <img src="<%= product.image %>" alt="<%= product.description %>">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name"><%= product.name %></h3>
                            <p class="product-description"><%= product.description %></p>
                            <% if (product.priceFormatted) { %>
                                <p class="product-price"><%= product.priceFormatted %></p>
                            <% } %>
                            <div class="product-actions">
                                <a href="/products?category=<%= product.category %>" class="product-link">View Details</a>
                                <% if (product._id) { %>
                                    <form method="POST" action="/cart/add" style="display: inline;">
                                        <input type="hidden" name="productId" value="<%= product._id %>">
                                        <input type="hidden" name="quantity" value="1">
                                        <button type="submit" class="btn btn-primary add-to-cart-btn">
                                            <i class="fas fa-shopping-cart"></i> Add to Cart
                                        </button>
                                    </form>
                                <% } %>
                            </div>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <div class="no-products">
                <h3>No products found</h3>
                <p>Try selecting a different category or <a href="/products">view all products</a>.</p>
            </div>
        <% } %>
    </div>
</section>
