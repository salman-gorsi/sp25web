<% layout('layouts/main') %>

<div class="checkout-container">
    <div class="checkout-header">
        <h1>Checkout</h1>
        <p>Complete your order</p>
    </div>

    <div class="checkout-content">
        <div class="checkout-form-section">
            <form method="POST" action="/checkout/place-order" class="checkout-form">
                <div class="form-section">
                    <h3>Contact Information</h3>
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" required 
                               value="<%= user.fullName || '' %>" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required 
                               value="<%= user.email || '' %>" placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" required 
                               value="<%= user.phone || '' %>" placeholder="Your phone number">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Delivery Address</h3>
                    <div class="form-group">
                        <label for="addressLine1">Street Address *</label>
                        <input type="text" id="addressLine1" name="addressLine1" required 
                               placeholder="123 Main Street">
                    </div>
                    <div class="form-group">
                        <label for="addressLine2">Apartment, suite, etc. (optional)</label>
                        <input type="text" id="addressLine2" name="addressLine2" 
                               placeholder="Apartment, suite, unit, building, floor, etc.">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">City *</label>
                            <input type="text" id="city" name="city" required placeholder="City">
                        </div>
                        <div class="form-group">
                            <label for="postalCode">Postal Code *</label>
                            <input type="text" id="postalCode" name="postalCode" required placeholder="Postal Code">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="country">Country *</label>
                        <select id="country" name="country" required>
                            <option value="">Select Country</option>
                            <option value="United Kingdom">United Kingdom</option>
                            <option value="United States">United States</option>
                            <option value="Canada">Canada</option>
                            <option value="Australia">Australia</option>
                            <option value="Germany">Germany</option>
                            <option value="France">France</option>
                            <option value="Italy">Italy</option>
                            <option value="Spain">Spain</option>
                            <option value="Netherlands">Netherlands</option>
                            <option value="Belgium">Belgium</option>
                            <option value="Switzerland">Switzerland</option>
                            <option value="Austria">Austria</option>
                            <option value="Sweden">Sweden</option>
                            <option value="Norway">Norway</option>
                            <option value="Denmark">Denmark</option>
                            <option value="Finland">Finland</option>
                            <option value="Ireland">Ireland</option>
                            <option value="Portugal">Portugal</option>
                            <option value="Greece">Greece</option>
                            <option value="Poland">Poland</option>
                            <option value="Czech Republic">Czech Republic</option>
                            <option value="Hungary">Hungary</option>
                            <option value="Japan">Japan</option>
                            <option value="South Korea">South Korea</option>
                            <option value="Singapore">Singapore</option>
                            <option value="Hong Kong">Hong Kong</option>
                            <option value="New Zealand">New Zealand</option>
                            <option value="Brazil">Brazil</option>
                            <option value="Mexico">Mexico</option>
                            <option value="Argentina">Argentina</option>
                            <option value="Chile">Chile</option>
                            <option value="South Africa">South Africa</option>
                            <option value="India">India</option>
                            <option value="China">China</option>
                            <option value="Thailand">Thailand</option>
                            <option value="Malaysia">Malaysia</option>
                            <option value="Indonesia">Indonesia</option>
                            <option value="Philippines">Philippines</option>
                            <option value="Vietnam">Vietnam</option>
                            <option value="Turkey">Turkey</option>
                            <option value="Russia">Russia</option>
                            <option value="Ukraine">Ukraine</option>
                            <option value="Israel">Israel</option>
                            <option value="United Arab Emirates">United Arab Emirates</option>
                            <option value="Saudi Arabia">Saudi Arabia</option>
                            <option value="Egypt">Egypt</option>
                            <option value="Morocco">Morocco</option>
                            <option value="Nigeria">Nigeria</option>
                            <option value="Kenya">Kenya</option>
                            <option value="Ghana">Ghana</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Payment Method</h3>
                    <div class="payment-option">
                        <input type="radio" id="cash" name="paymentMethod" value="cash" checked>
                        <label for="cash">
                            <i class="fas fa-money-bill-wave"></i>
                            Cash on Delivery
                        </label>
                        <p class="payment-description">Pay when your order is delivered to your door</p>
                    </div>
                </div>

                <button type="submit" class="place-order-btn">
                    <i class="fas fa-shopping-bag"></i>
                    Place Order - <%= cart.totalAmountFormatted %>
                </button>
            </form>
        </div>

        <div class="order-summary-section">
            <div class="order-summary">
                <h3>Order Summary</h3>
                <div class="summary-items">
                    <% cart.items.forEach(item => { %>
                        <div class="summary-item">
                            <img src="<%= item.imageUrl %>" alt="<%= item.title %>" onerror="this.src='/assets/placeholder.jpg'">
                            <div class="item-info">
                                <h4><%= item.title %></h4>
                                <p>Qty: <%= item.quantity %></p>
                            </div>
                            <div class="item-price">
                                <%= item.totalFormatted %>
                            </div>
                        </div>
                    <% }) %>
                </div>
                <div class="summary-totals">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span><%= cart.totalAmountFormatted %></span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping:</span>
                        <span>FREE</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span><%= cart.totalAmountFormatted %></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.checkout-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.checkout-header {
    text-align: center;
    margin-bottom: 30px;
}

.checkout-header h1 {
    font-size: 2.5rem;
    color: #2c3e50;
    margin-bottom: 10px;
}

.checkout-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
}

.checkout-form-section {
    background: white;
    border-radius: 10px;
    padding: 30px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.form-section {
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #ecf0f1;
}

.form-section:last-child {
    border-bottom: none;
}

.form-section h3 {
    color: #2c3e50;
    margin-bottom: 20px;
    font-size: 1.3rem;
}

.form-group {
    margin-bottom: 20px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    color: #2c3e50;
    font-weight: 600;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 1rem;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
}

.payment-option {
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 15px;
    margin-bottom: 15px;
}

.payment-option input[type="radio"] {
    margin-right: 10px;
}

.payment-option label {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-weight: 600;
    color: #2c3e50;
}

.payment-option label i {
    margin-right: 10px;
    color: #27ae60;
}

.payment-description {
    margin-top: 5px;
    color: #7f8c8d;
    font-size: 0.9rem;
}

.place-order-btn {
    width: 100%;
    background: #27ae60;
    color: white;
    border: none;
    padding: 15px 20px;
    border-radius: 6px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.place-order-btn:hover {
    background: #229954;
}

.order-summary-section {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    height: fit-content;
}

.order-summary h3 {
    color: #2c3e50;
    margin-bottom: 20px;
}

.summary-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 0;
    border-bottom: 1px solid #ecf0f1;
}

.summary-item:last-child {
    border-bottom: none;
}

.summary-item img {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 6px;
}

.item-info h4 {
    font-size: 0.9rem;
    color: #2c3e50;
    margin-bottom: 5px;
}

.item-info p {
    color: #7f8c8d;
    font-size: 0.8rem;
}

.item-price {
    margin-left: auto;
    font-weight: 600;
    color: #27ae60;
}

.summary-totals {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #ecf0f1;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.summary-row.total {
    font-weight: 600;
    font-size: 1.2rem;
    color: #2c3e50;
    padding-top: 10px;
    border-top: 2px solid #3498db;
}

@media (max-width: 768px) {
    .checkout-content {
        grid-template-columns: 1fr;
    }
    
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>
