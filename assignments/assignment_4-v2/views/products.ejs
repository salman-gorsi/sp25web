<section class="products-hero">
    <div class="products-hero-content">
        <h1>Our Collections</h1>
        <p>Discover our beautiful range of clothing inspired by Cornwall's creative heritage</p>
    </div>
</section>

<section class="products-filter">
    <div class="filter-container">
        <h2>Shop by Category</h2>
        <div class="category-filters">
            <a href="/products" class="filter-link <%= !selectedCategory ? 'active' : '' %>">All Products</a>
            <% categories.forEach(category => { %>
                <a href="/products?category=<%= category.slug %>" 
                   class="filter-link <%= selectedCategory === category.slug ? 'active' : '' %>">
                    <%= category.name %>
                </a>
            <% }) %>
        </div>
    </div>
</section>

<section class="products-grid">
    <div class="products-container">
        <% if (products.length > 0) { %>
            <div class="products-list">
                <% products.forEach(product => { %>
                    <div class="product-card">
                        <div class="product-image">
                            <img src="<%= product.image %>" alt="<%= product.description %>">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name"><%= product.name %></h3>
                            <p class="product-description"><%= product.description %></p>
                            <p class="product-price"><%= product.priceFormatted %></p>
                            
                            <% if (product.inStock) { %>
                                <form method="POST" action="/cart/add" class="add-to-cart-form">
                                    <input type="hidden" name="productId" value="<%= product._id %>">
                                    <div class="quantity-selector">
                                        <label for="quantity-<%= product._id %>">Qty:</label>
                                        <select name="quantity" id="quantity-<%= product._id %>">
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="add-to-cart-btn">
                                        <i class="fas fa-shopping-cart"></i>
                                        Add to Cart
                                    </button>
                                </form>
                            <% } else { %>
                                <button class="add-to-cart-btn" disabled>
                                    Out of Stock
                                </button>
                            <% } %>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <div class="no-products">
                <h3>No products found</h3>
                <p>Try selecting a different category or <a href="/products">view all products</a>.</p>
            </div>
        <% } %>
    </div>
</section>
